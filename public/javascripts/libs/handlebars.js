(function(){var d={};d.VERSION="1.0.beta.6";d.helpers={};d.partials={};d.registerHelper=function(f,g,e){if(e){g.not=e}this.helpers[f]=g};d.registerPartial=function(e,f){this.partials[e]=f};d.registerHelper("helperMissing",function(e){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+e+"'")}});var b=Object.prototype.toString,c="[object Function]";d.registerHelper("blockHelperMissing",function(l,h){var e=h.inverse||function(){},n=h.fn;var g="";var m=b.call(l);if(m===c){l=l.call(this)}if(l===true){return n(this)}else{if(l===false||l==null){return e(this)}else{if(m==="[object Array]"){if(l.length>0){for(var k=0,f=l.length;k<f;k++){g=g+n(l[k])}}else{g=e(this)}return g}else{return n(l)}}}});d.registerHelper("each",function(l,h){var m=h.fn,e=h.inverse;var g="";if(l&&l.length>0){for(var k=0,f=l.length;k<f;k++){g=g+m(l[k])}}else{g=e(this)}return g});d.registerHelper("if",function(f,e){var g=b.call(f);if(g===c){f=f.call(this)}if(!f||d.Utils.isEmpty(f)){return e.inverse(this)}else{return e.fn(this)}});d.registerHelper("unless",function(g,f){var h=f.fn,e=f.inverse;f.fn=e;f.inverse=h;return d.helpers["if"].call(this,g,f)});d.registerHelper("with",function(f,e){return e.fn(f)});d.registerHelper("log",function(e){d.log(e)});var a=(function(){var j={trace:function g(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function f(k,n,o,r,q,m,p){var l=m.length-1;switch(q){case 1:return m[l-1];break;case 2:this.$=new r.ProgramNode(m[l-2],m[l]);break;case 3:this.$=new r.ProgramNode(m[l]);break;case 4:this.$=new r.ProgramNode([]);break;case 5:this.$=[m[l]];break;case 6:m[l-1].push(m[l]);this.$=m[l-1];break;case 7:this.$=new r.InverseNode(m[l-2],m[l-1],m[l]);break;case 8:this.$=new r.BlockNode(m[l-2],m[l-1],m[l]);break;case 9:this.$=m[l];break;case 10:this.$=m[l];break;case 11:this.$=new r.ContentNode(m[l]);break;case 12:this.$=new r.CommentNode(m[l]);break;case 13:this.$=new r.MustacheNode(m[l-1][0],m[l-1][1]);break;case 14:this.$=new r.MustacheNode(m[l-1][0],m[l-1][1]);break;case 15:this.$=m[l-1];break;case 16:this.$=new r.MustacheNode(m[l-1][0],m[l-1][1]);break;case 17:this.$=new r.MustacheNode(m[l-1][0],m[l-1][1],true);break;case 18:this.$=new r.PartialNode(m[l-1]);break;case 19:this.$=new r.PartialNode(m[l-2],m[l-1]);break;case 20:break;case 21:this.$=[[m[l-2]].concat(m[l-1]),m[l]];break;case 22:this.$=[[m[l-1]].concat(m[l]),null];break;case 23:this.$=[[m[l-1]],m[l]];break;case 24:this.$=[[m[l]],null];break;case 25:m[l-1].push(m[l]);this.$=m[l-1];break;case 26:this.$=[m[l]];break;case 27:this.$=m[l];break;case 28:this.$=new r.StringNode(m[l]);break;case 29:this.$=new r.IntegerNode(m[l]);break;case 30:this.$=new r.BooleanNode(m[l]);break;case 31:this.$=new r.HashNode(m[l]);break;case 32:m[l-1].push(m[l]);this.$=m[l-1];break;case 33:this.$=[m[l]];break;case 34:this.$=[m[l-2],m[l]];break;case 35:this.$=[m[l-2],new r.StringNode(m[l])];break;case 36:this.$=[m[l-2],new r.IntegerNode(m[l])];break;case 37:this.$=[m[l-2],new r.BooleanNode(m[l])];break;case 38:this.$=new r.IdNode(m[l]);break;case 39:m[l-2].push(m[l]);this.$=m[l-2];break;case 40:this.$=[m[l]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function h(l,k){throw new Error(l)},parse:function i(u){var B=this,q=[0],K=[null],w=[],L=this.table,l="",v=0,I=0,n=0,t=2,y=1;this.lexer.setInput(u);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var m=this.lexer.yylloc;w.push(m);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function A(p){q.length=q.length-2*p;K.length=K.length-p;w.length=w.length-p}function z(){var p;p=B.lexer.lex()||1;if(typeof p!=="number"){p=B.symbols_[p]||p}return p}var H,D,o,G,M,x,F={},C,J,k,s;while(true){o=q[q.length-1];if(this.defaultActions[o]){G=this.defaultActions[o]}else{if(H==null){H=z()}G=L[o]&&L[o][H]}if(typeof G==="undefined"||!G.length||!G[0]){if(!n){s=[];for(C in L[o]){if(this.terminals_[C]&&C>2){s.push("'"+this.terminals_[C]+"'")}}var E="";if(this.lexer.showPosition){E="Parse error on line "+(v+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+s.join(", ")+", got '"+this.terminals_[H]+"'"}else{E="Parse error on line "+(v+1)+": Unexpected "+(H==1?"end of input":"'"+(this.terminals_[H]||H)+"'")}this.parseError(E,{text:this.lexer.match,token:this.terminals_[H]||H,line:this.lexer.yylineno,loc:m,expected:s})}}if(G[0] instanceof Array&&G.length>1){throw new Error("Parse Error: multiple actions possible at state: "+o+", token: "+H)}switch(G[0]){case 1:q.push(H);K.push(this.lexer.yytext);w.push(this.lexer.yylloc);q.push(G[1]);H=null;if(!D){I=this.lexer.yyleng;l=this.lexer.yytext;v=this.lexer.yylineno;m=this.lexer.yylloc;if(n>0){n--}}else{H=D;D=null}break;case 2:J=this.productions_[G[1]][1];F.$=K[K.length-J];F._$={first_line:w[w.length-(J||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(J||1)].first_column,last_column:w[w.length-1].last_column};x=this.performAction.call(F,l,I,v,this.yy,G[1],K,w);if(typeof x!=="undefined"){return x}if(J){q=q.slice(0,-1*J*2);K=K.slice(0,-1*J);w=w.slice(0,-1*J)}q.push(this.productions_[G[1]][0]);K.push(F.$);w.push(F._$);k=L[q[q.length-2]][q[q.length-1]];q.push(k);break;case 3:return true}}return true}};var e=(function(){var n=({EOF:1,parseError:function p(s,r){if(this.yy.parseError){this.yy.parseError(s,r)}else{throw new Error(s)}},setInput:function(r){this._input=r;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var s=this._input[0];this.yytext+=s;this.yyleng++;this.match+=s;this.matched+=s;var r=s.match(/\n/);if(r){this.yylineno++}this._input=this._input.slice(1);return s},unput:function(r){this._input=r+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var r=this.matched.substr(0,this.matched.length-this.match.length);return(r.length>20?"...":"")+r.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var r=this.match;if(r.length<20){r+=this._input.substr(0,20-r.length)}return(r.substr(0,20)+(r.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var r=this.pastInput();var s=new Array(r.length+1).join("-");return r+this.upcomingInput()+"\n"+s+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var v,t,s,r;if(!this._more){this.yytext="";this.match=""}var w=this._currentRules();for(var u=0;u<w.length;u++){t=this._input.match(this.rules[w[u]]);if(t){r=t[0].match(/\n.*/g);if(r){this.yylineno+=r.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length};this.yytext+=t[0];this.match+=t[0];this.matches=t;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(t[0].length);this.matched+=t[0];v=this.performAction.call(this,this.yy,this,w[u],this.conditionStack[this.conditionStack.length-1]);if(v){return v}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function k(){var s=this.next();if(typeof s!=="undefined"){return s}else{return this.lex()}},begin:function l(r){this.conditionStack.push(r)},popState:function q(){return this.conditionStack.pop()},_currentRules:function o(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function l(r){this.begin(r)}});n.performAction=function m(v,s,u,r){var t=r;switch(u){case 0:if(s.yytext.slice(-1)!=="\\"){this.begin("mu")}if(s.yytext.slice(-1)==="\\"){s.yytext=s.yytext.substr(0,s.yyleng-1),this.begin("emu")}if(s.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:return 24;break;case 4:return 16;break;case 5:return 20;break;case 6:return 19;break;case 7:return 19;break;case 8:return 23;break;case 9:return 23;break;case 10:s.yytext=s.yytext.substr(3,s.yyleng-5);this.popState();return 15;break;case 11:return 22;break;case 12:return 34;break;case 13:return 33;break;case 14:return 33;break;case 15:return 36;break;case 16:break;case 17:this.popState();return 18;break;case 18:this.popState();return 18;break;case 19:s.yytext=s.yytext.substr(1,s.yyleng-2).replace(/\\"/g,'"');return 28;break;case 20:return 30;break;case 21:return 30;break;case 22:return 29;break;case 23:return 33;break;case 24:s.yytext=s.yytext.substr(1,s.yyleng-2);return 33;break;case 25:return"INVALID";break;case 26:return 5;break}};n.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/];n.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:false},emu:{rules:[2],inclusive:false},INITIAL:{rules:[0,1,26],inclusive:true}};return n})();j.lexer=e;return j})();d.Parser=a;d.parse=function(e){d.Parser.yy=d.AST;return d.Parser.parse(e)};d.print=function(e){return new d.PrintVisitor().accept(e)};d.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(f,e){}};d.log=function(f,e){d.logger.log(f,e)};(function(){d.AST={};d.AST.ProgramNode=function(g,f){this.type="program";this.statements=g;if(f){this.inverse=new d.AST.ProgramNode(f)}};d.AST.MustacheNode=function(h,g,f){this.type="mustache";this.id=h[0];this.params=h.slice(1);this.hash=g;this.escaped=!f};d.AST.PartialNode=function(g,f){this.type="partial";this.id=g;this.context=f};var e=function(f,g){if(f.original!==g.original){throw new d.Exception(f.original+" doesn't match "+g.original)}};d.AST.BlockNode=function(g,f,h){e(g.id,h);this.type="block";this.mustache=g;this.program=f};d.AST.InverseNode=function(g,f,h){e(g.id,h);this.type="inverse";this.mustache=g;this.program=f};d.AST.ContentNode=function(f){this.type="content";this.string=f};d.AST.HashNode=function(f){this.type="hash";this.pairs=f};d.AST.IdNode=function(k){this.type="ID";this.original=k.join(".");var h=[],m=0;for(var j=0,f=k.length;j<f;j++){var g=k[j];if(g===".."){m++}else{if(g==="."||g==="this"){this.isScoped=true}else{h.push(g)}}}this.parts=h;this.string=h.join(".");this.depth=m;this.isSimple=(h.length===1)&&(m===0)};d.AST.StringNode=function(f){this.type="STRING";this.string=f};d.AST.IntegerNode=function(f){this.type="INTEGER";this.integer=f};d.AST.BooleanNode=function(f){this.type="BOOLEAN";this.bool=f};d.AST.CommentNode=function(f){this.type="comment";this.comment=f}})();d.Exception=function(f){var e=Error.prototype.constructor.apply(this,arguments);for(var g in e){if(e.hasOwnProperty(g)){this[g]=e[g]}}this.message=e.message};d.Exception.prototype=new Error;d.SafeString=function(e){this.string=e};d.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var g={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var h=/&(?!\w+;)|[<>"'`]/g;var f=/[&<>"'`]/;var e=function(i){return g[i]||"&amp;"};d.Utils={escapeExpression:function(i){if(i instanceof d.SafeString){return i.toString()}else{if(i==null||i===false){return""}}if(!f.test(i)){return i}return i.replace(h,e)},isEmpty:function(i){if(typeof i==="undefined"){return true}else{if(i===null){return true}else{if(i===false){return true}else{if(Object.prototype.toString.call(i)==="[object Array]"&&i.length===0){return true}else{return false}}}}}}})();d.Compiler=function(){};d.JavaScriptCompiler=function(){};(function(k,j){k.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16};k.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1};k.DISASSEMBLE_MAP={};for(var n in k.OPCODE_MAP){var m=k.OPCODE_MAP[n];k.DISASSEMBLE_MAP[m]=n}k.multiParamSize=function(i){return k.MULTI_PARAM_OPCODES[k.DISASSEMBLE_MAP[i]]};k.prototype={compiler:k,disassemble:function(){var w=this.opcodes,u,q;var t=[],y,p,z;for(var v=0,r=w.length;v<r;v++){u=w[v];if(u==="DECLARE"){p=w[++v];z=w[++v];t.push("DECLARE "+p+" = "+z)}else{y=k.DISASSEMBLE_MAP[u];var x=k.multiParamSize(u);var o=[];for(var s=0;s<x;s++){q=w[++v];if(typeof q==="string"){q='"'+q.replace("\n","\\n")+'"'}o.push(q)}y=y+" "+o.join(" ");t.push(y)}}return t.join("\n")},guid:0,compile:function(i,o){this.children=[];this.depths={list:[]};this.options=o;var p=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(p){for(var l in p){this.options.knownHelpers[l]=p[l]}}return this.program(i)},accept:function(i){return this[i.type](i)},program:function(q){var p=q.statements,s;this.opcodes=[];for(var r=0,o=p.length;r<o;r++){s=p[r];this[s.type](s)}this.isSimple=o===1;this.depths.list=this.depths.list.sort(function(l,i){return l-i});return this},compileProgram:function(q){var o=new this.compiler().compile(q,this.options);var r=this.guid++;this.usePartial=this.usePartial||o.usePartial;this.children[r]=o;for(var s=0,p=o.depths.list.length;s<p;s++){depth=o.depths.list[s];if(depth<2){continue}else{this.addDepth(depth-1)}}return r},block:function(s){var p=s.mustache;var r,t,l,o;var q=this.setupStackForMustache(p);var i=this.compileProgram(s.program);if(s.program.inverse){o=this.compileProgram(s.program.inverse);this.declare("inverse",o)}this.opcode("invokeProgram",i,q.length,!!p.hash);this.declare("inverse",null);this.opcode("append")},inverse:function(o){var l=this.setupStackForMustache(o.mustache);var i=this.compileProgram(o.program);this.declare("inverse",i);this.opcode("invokeProgram",null,l.length,!!o.mustache.hash);this.declare("inverse",null);this.opcode("append")},hash:function(r){var q=r.pairs,t,s;this.opcode("push","{}");for(var p=0,o=q.length;p<o;p++){t=q[p];s=t[1];this.accept(s);this.opcode("assignToHash",t[0])}},partial:function(i){var l=i.id;this.usePartial=true;if(i.context){this.ID(i.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",l.original);this.opcode("append")},content:function(i){this.opcode("appendContent",i.string)},mustache:function(i){var l=this.setupStackForMustache(i);this.opcode("invokeMustache",l.length,i.id.original,!!i.hash);if(i.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(q){this.addDepth(q.depth);this.opcode("getContext",q.depth);this.opcode("lookupWithHelpers",q.parts[0]||null,q.isScoped||false);for(var p=1,o=q.parts.length;p<o;p++){this.opcode("lookup",q.parts[p])}},STRING:function(i){this.opcode("pushString",i.string)},INTEGER:function(i){this.opcode("push",i.integer)},BOOLEAN:function(i){this.opcode("push",i.bool)},comment:function(){},pushParams:function(p){var l=p.length,o;while(l--){o=p[l];if(this.options.stringParams){if(o.depth){this.addDepth(o.depth)}this.opcode("getContext",o.depth||0);this.opcode("pushStringParam",o.string)}else{this[o.type](o)}}},opcode:function(i,p,o,l){this.opcodes.push(k.OPCODE_MAP[i]);if(p!==undefined){this.opcodes.push(p)}if(o!==undefined){this.opcodes.push(o)}if(l!==undefined){this.opcodes.push(l)}},declare:function(i,l){this.opcodes.push("DECLARE");this.opcodes.push(i);this.opcodes.push(l)},addDepth:function(i){if(i===0){return}if(!this.depths[i]){this.depths[i]=true;this.depths.list.push(i)}},setupStackForMustache:function(i){var l=i.params;this.pushParams(l);if(i.hash){this.hash(i.hash)}this.ID(i.id);return l}};j.prototype={nameLookup:function(o,i,l){if(/^[0-9]+$/.test(i)){return o+"["+i+"]"}else{if(j.isValidJavaScriptVariableName(i)){return o+"."+i}else{return o+"['"+i+"']"}}},appendToBuffer:function(i){if(this.environment.isSimple){return"return "+i+";"}else{return"buffer += "+i+";"}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(i,l,p,o){this.environment=i;this.options=l||{};this.name=this.environment.name;this.isChild=!!p;this.context=p||{programs:[],aliases:{self:"this"},registers:{list:[]}};this.preamble();this.stackSlot=0;this.stackVars=[];this.compileChildren(i,l);var r=i.opcodes,q;this.i=0;for(f=r.length;this.i<f;this.i++){q=this.nextOpcode(0);if(q[0]==="DECLARE"){this.i=this.i+2;this[q[1]]=q[2]}else{this.i=this.i+q[1].length;this[q[0]].apply(this,q[1])}}return this.createFunctionContext(o)},nextOpcode:function(t){var q=this.environment.opcodes,p=q[this.i+t],o,r;var s,i;if(p==="DECLARE"){o=q[this.i+1];r=q[this.i+2];return["DECLARE",o,r]}else{o=k.DISASSEMBLE_MAP[p];s=k.multiParamSize(p);i=[];for(var l=0;l<s;l++){i.push(q[this.i+l+1+t])}return[o,i]}},eat:function(i){this.i=this.i+i.length},preamble:function(){var i=[];this.useRegister("foundHelper");if(!this.isChild){var l=this.namespace;var o="helpers = helpers || "+l+".helpers;";if(this.environment.usePartial){o=o+" partials = partials || "+l+".partials;"}i.push(o)}else{i.push("")}if(!this.environment.isSimple){i.push(", buffer = "+this.initializeBuffer())}else{i.push("")}this.lastContext=0;this.source=i},createFunctionContext:function(t){var u=this.stackVars;if(!this.isChild){u=u.concat(this.context.registers.list)}if(u.length>0){this.source[1]=this.source[1]+", "+u.join(", ")}if(!this.isChild){var p=[];for(var s in this.context.aliases){this.source[1]=this.source[1]+", "+s+"="+this.context.aliases[s]}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var v=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var r=0,o=this.environment.depths.list.length;r<o;r++){v.push("depth"+this.environment.depths.list[r])}if(t){v.push(this.source.join("\n  "));return Function.apply(this,v)}else{var q="function "+(this.name||"")+"("+v.join(",")+") {\n  "+this.source.join("\n  ")+"}";d.log(d.logger.DEBUG,q+"\n\n");return q}},appendContent:function(i){this.source.push(this.appendToBuffer(this.quotedString(i)))},append:function(){var i=this.popStack();this.source.push("if("+i+" || "+i+" === 0) { "+this.appendToBuffer(i)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){var l=this.nextOpcode(1),i="";this.context.aliases.escapeExpression="this.escapeExpression";if(l[0]==="appendContent"){i=" + "+this.quotedString(l[1][0]);this.eat(l)}this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+i))},getContext:function(i){if(this.lastContext!==i){this.lastContext=i}},lookupWithHelpers:function(o,p){if(o){var i=this.nextStack();this.usingKnownHelper=false;var l;if(!p&&this.options.knownHelpers[o]){l=i+" = "+this.nameLookup("helpers",o,"helper");this.usingKnownHelper=true}else{if(p||this.options.knownHelpersOnly){l=i+" = "+this.nameLookup("depth"+this.lastContext,o,"context")}else{this.register("foundHelper",this.nameLookup("helpers",o,"helper"));l=i+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,o,"context")}}l+=";";this.source.push(l)}else{this.pushStack("depth"+this.lastContext)}},lookup:function(l){var i=this.topStack();this.source.push(i+" = ("+i+" === null || "+i+" === undefined || "+i+" === false ? "+i+" : "+this.nameLookup(i,l,"context")+");")},pushStringParam:function(i){this.pushStack("depth"+this.lastContext);this.pushString(i)},pushString:function(i){this.pushStack(this.quotedString(i))},push:function(i){this.pushStack(i)},invokeMustache:function(o,l,i){this.populateParams(o,this.quotedString(l),"{}",null,i,function(p,r,q){if(!this.usingKnownHelper){this.context.aliases.helperMissing="helpers.helperMissing";this.context.aliases.undef="void 0";this.source.push("else if("+q+"=== undef) { "+p+" = helperMissing.call("+r+"); }");if(p!==q){this.source.push("else { "+p+" = "+q+"; }")}}})},invokeProgram:function(o,p,l){var i=this.programExpression(this.inverse);var q=this.programExpression(o);this.populateParams(p,null,q,i,l,function(r,t,s){if(!this.usingKnownHelper){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";this.source.push("else { "+r+" = blockHelperMissing.call("+t+"); }")}})},populateParams:function(t,o,x,u,B,A){var p=B||this.options.stringParams||u||this.options.data;var l=this.popStack(),z;var r=[],q,s,y;if(p){this.register("tmp1",x);y="tmp1"}else{y="{ hash: {} }"}if(p){var w=(B?this.popStack():"{}");this.source.push("tmp1.hash = "+w+";")}if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var v=0;v<t;v++){q=this.popStack();r.push(q);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(u){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+u+";")}if(this.options.data){this.source.push("tmp1.data = data;")}r.push(y);this.populateCall(r,l,o||l,A,x!=="{}")},populateCall:function(r,l,o,u,s){var q=["depth0"].concat(r).join(", ");var i=["depth0"].concat(o).concat(r).join(", ");var t=this.nextStack();if(this.usingKnownHelper){this.source.push(t+" = "+l+".call("+q+");")}else{this.context.aliases.functionType='"function"';var p=s?"foundHelper && ":"";this.source.push("if("+p+"typeof "+l+" === functionType) { "+t+" = "+l+".call("+q+"); }")}u.call(this,t,i,l);this.usingKnownHelper=false},invokePartial:function(i){params=[this.nameLookup("partials",i,"partial"),"'"+i+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data")}this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(i){var l=this.popStack();var o=this.topStack();this.source.push(o+"['"+i+"'] = "+l+";")},compiler:j,compileChildren:function(o,r){var t=o.children,v,u;for(var s=0,p=t.length;s<p;s++){v=t[s];u=new this.compiler();this.context.programs.push("");var q=this.context.programs.length;v.index=q;v.name="program"+q;this.context.programs[q]=u.compile(v,r,this.context)}},programExpression:function(p){if(p==null){return"self.noop"}var t=this.environment.children[p],s=t.depths.list;var r=[t.index,t.name,"data"];for(var q=0,o=s.length;q<o;q++){depth=s[q];if(depth===1){r.push("depth0")}else{r.push("depth"+(depth-1))}}if(s.length===0){return"self.program("+r.join(", ")+")"}else{r.shift();return"self.programWithDepth("+r.join(", ")+")"}},register:function(i,l){this.useRegister(i);this.source.push(i+" = "+l+";")},useRegister:function(i){if(!this.context.registers[i]){this.context.registers[i]=true;this.context.registers.list.push(i)}},pushStack:function(i){this.source.push(this.nextStack()+" = "+i+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(i){return'"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var e=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var h=j.RESERVED_WORDS={};for(var g=0,f=e.length;g<f;g++){h[e[g]]=true}j.isValidJavaScriptVariableName=function(i){if(!j.RESERVED_WORDS[i]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(i)){return true}return false}})(d.Compiler,d.JavaScriptCompiler);d.precompile=function(h,g){g=g||{};var f=d.parse(h);var e=new d.Compiler().compile(f,g);return new d.JavaScriptCompiler().compile(e,g)};d.compile=function(f,e){e=e||{};var h;function g(){var k=d.parse(f);var j=new d.Compiler().compile(k,e);var i=new d.JavaScriptCompiler().compile(j,e,undefined,true);return d.template(i)}return function(j,i){if(!h){h=g()}return h.call(this,j,i)}};d.VM={template:function(e){var f={escapeExpression:d.Utils.escapeExpression,invokePartial:d.VM.invokePartial,programs:[],program:function(h,j,k){var g=this.programs[h];if(k){return d.VM.program(j,k)}else{if(g){return g}else{g=this.programs[h]=d.VM.program(j);return g}}},programWithDepth:d.VM.programWithDepth,noop:d.VM.noop};return function(h,g){g=g||{};return e.call(f,d,h,g.helpers,g.partials,g.data)}},programWithDepth:function(f,h,g){var e=Array.prototype.slice.call(arguments,2);return function(j,i){i=i||{};return f.apply(this,[j,i.data||h].concat(e))}},program:function(e,f){return function(h,g){g=g||{};return e(h,g.data||f)}},noop:function(){return""},invokePartial:function(e,f,h,i,g,j){options={helpers:i,partials:g,data:j};if(e===undefined){throw new d.Exception("The partial "+f+" could not be found")}else{if(e instanceof Function){return e(h,options)}else{if(!d.compile){throw new d.Exception("The partial "+f+" could not be compiled when running in runtime-only mode")}else{g[f]=d.compile(e);return g[f](h,options)}}}}};d.template=d.VM.template;define(function(){return d})})();